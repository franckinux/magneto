{% extends "base.html" %}
{% block title %}{{ _("Programmation d'un enregistrement") }}{% endblock %}

{% block styles %}
{{ super() }}
<link href="/static/gijgo/css/gijgo.min.css" rel="stylesheet" type="text/css">
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="/static/gijgo/js/gijgo.min.js" type="text/javascript"></script>
<script src="/static/gijgo/js/messages/messages.fr-fr.min.js" type="text/javascript"></script>
{% endblock %}

{% block page_content %}
<div class="container">
    <div class="row">
        <h1>{{ _("Programmation d'un enregistrement") }}</h1>
    </div>
    <div class="row">
        <form method="POST" action="{{ url("index") }}" role="form">
            <div class="form-group">
                {{ form.adapter.label(for="adapter") }}
                {{ form.adapter(class="form-control") }}
                {% if form.adapter.errors %}
                <div class="help-text">
                    {% for error in form.adapter.errors %}<p>{{ error }}</p>{% endfor %}
                </div>
                {% endif %}
            </div>
            <div class="form-group">
                {{ form.channel.label(for="channel") }}
                {{ form.channel(class="form-control") }}
                {% if form.channel.errors %}
                <div class="help-text">
                    {% for error in form.channel.errors %}<p>{{ error }}</p>{% endfor %}
                </div>
                {% endif %}
            </div>
            <div class="form-group{% if form.program_name.errors %} has-error{% endif %}">
                {{ form.program_name.label(for="program_name") }}
                {{ form.program_name(class="form-control") }}
                {% if form.program_name.errors %}
                <div class="help-text">
                    {% for error in form.program_name.errors %}<p>{{ error }}</p>{% endfor %}
                </div>
                {% endif %}
            </div>
            <div class="form-group{% if form.begin_date.errors %} has-error{% endif %}">
                {{ form.begin_date.label(for="begin_date") }}
                {% if form.begin_date.data is none %}
                <input id="begin_date" name="begin_date" width="100%" placeholder="{{ _("Entrez la date de dÃ©but") }}" />
                {% else %}
                <input id="begin_date" name="begin_date" width="100%" value="{{ form.begin_date.data.strftime("%d-%m-%Y %H:%M") }}" />
                {% endif %}
                <div class="help-text">
                    {% for error in form.begin_date.errors %}<p>{{ error }}</p>{% endfor %}
                </div>
            </div>
            <div class="form-group{% if form.end_date.errors %} has-error{% endif %}">
                {{ form.end_date.label(for="end_date") }}
                {% if form.end_date.data is none %}
                <input id="end_date" name="end_date" width="100%" placeholder="{{ _("Entrez la date de fin") }}"  />
                {% else %}
                <input id="end_date" name="end_date" width="100%" value="{{ form.end_date.data.strftime("%d-%m-%Y %H:%M") }}" />
                {% endif %}
                <div class="help-text">
                    {% for error in form.end_date.errors %}<p>{{ error }}</p>{% endfor %}
                </div>
            </div>
            <div class="form-check">
                {{ form.shutdown(class="form-check-input") }}
                {{ form.shutdown.label(for="shutdown") }}
            </div>
            <div>
                {{ form.submit(class="btn btn-primary") }}
                <a href="{{ url("index") }}" class="btn btn-light">{{ _("Annuler") }}</a>
            </div>
        </form>
    </div>
</div>

<script>
    $('#begin_date').datetimepicker({
        format: "dd-mm-yyyy HH:MM",
        modal: true,
        footer: true,
        uiLibrary: "bootstrap4",
        locale: "fr-fr",
        minDate: Date.now(),
        weekStartDay: 1
    });
    $('#end_date').datetimepicker({
        format: "dd-mm-yyyy HH:MM",
        modal: true,
        footer: true,
        uiLibrary: "bootstrap4",
        locale: "fr-fr",
        minDate: Date.now(),
        weekStartDay: 1
    });
</script>
{% endblock %}
