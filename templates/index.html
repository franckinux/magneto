{% extends "base.html" %}
{% block title %}Enregistreur de télévision numérique{% endblock %}

{% block styles %}
{{ super() }}
<link href="/static/gijgo/css/gijgo.min.css" rel="stylesheet" type="text/css">
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="/static/gijgo/js/gijgo.min.js" type="text/javascript"></script>
<script src="/static/gijgo/js/messages/messages.fr-fr.min.js" type="text/javascript"></script>
{% endblock %}

{% block page_content %}
<form method="POST" action="{{ url("index") }}" role="form">
    <div class="form-group">
        {{ form.channel.label(for="channel") }}
        {{ form.channel(class="form-control") }}
        {% if form.channel.errors %}
        <div class="help-text">
            {% for error in form.channel.errors %}<p>{{ error }}</p>{% endfor %}
        </div>
        {% endif %}
    </div>
    <div class="form-group{% if form.program_name.errors %} has-error{% endif %}">
        {{ form.program_name.label(for="program_name") }}
        {{ form.program_name(class="form-control") }}
        {% if form.program_name.errors %}
        <div class="help-text">
            {% for error in form.program_name.errors %}<p>{{ error }}</p>{% endfor %}
        </div>
        {% endif %}
    </div>
    <div class="form-group">
        {{ form.immediate() }}
        {{ form.immediate.label(for="opened") }}
    </div>
    <div class="form-group{% if form.begin_date.errors %} has-error{% endif %}">
        {{ form.begin_date.label(for="begin_date") }}
        {% if form.begin_date.data is none %}
        <input id="begin_date" name="begin_date" width="100%" placeholder="Entrez la date de début de l'enregistrement" />
        {% else %}
        <input id="begin_date" name="begin_date" width="100%" value="{{ form.begin_date.data.strftime("%d-%m-%Y %H:%M") }}" />
        {% endif %}
        <div class="help-text">
            {% for error in form.begin_date.errors %}<p>{{ error }}</p>{% endfor %}
        </div>
    </div>
    <div class="form-group{% if form.end_date.errors %} has-error{% endif %}">
        {{ form.end_date.label(for="end_date") }}
        {% if form.end_date.data is none %}
        <input id="end_date" name="end_date" width="100%" placeholder="Entrez la date de fin de l'enregistrement" />
        {% else %}
        <input id="end_date" name="end_date" width="100%" value="{{ form.end_date.data.strftime("%d-%m-%Y %H:%M") }}" />
        {% endif %}
        <div class="help-text">
            {% for error in form.end_date.errors %}<p>{{ error }}</p>{% endfor %}
        </div>
    </div>
    <div>
        {{ form.submit(class="btn btn-primary") }}
        <a href="{{ url("index") }}" class="btn btn-light">Annuler</a>
    </div>
</form>

<script>
    $('#begin_date').datetimepicker({
        format: "dd-mm-yyyy HH:MM",
        modal: true,
        footer: true,
        uiLibrary: "bootstrap4",
        locale: "fr-fr",
        minDate: Date.now(),
        weekStartDay: 1
    });
    $('#end_date').datetimepicker({
        format: "dd-mm-yyyy HH:MM",
        modal: true,
        footer: true,
        uiLibrary: "bootstrap4",
        locale: "fr-fr",
        minDate: Date.now(),
        weekStartDay: 1
    });
</script>
{% endblock %}
